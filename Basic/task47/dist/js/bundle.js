!function(e){var t=window.webpackHotUpdate;window.webpackHotUpdate=function(e,n){!function(e,t){if(g[e]&&w[e]){for(var n in w[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(h[n]=t[n]);0==--v&&0===m&&k()}}(e,n),t&&t(e,n)};var n,r=!0,o="02d68de9d174cea5ae60",i=1e4,a={},c=[],s=[];function u(e){var t=j[e];if(!t)return P;var r=function(r){return t.hot.active?(j[r]?-1===j[r].parents.indexOf(e)&&j[r].parents.push(e):(c=[e],n=r),-1===t.children.indexOf(r)&&t.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+e),c=[]),P(r)},o=function(e){return{configurable:!0,enumerable:!0,get:function(){return P[e]},set:function(t){P[e]=t}}};for(var i in P)Object.prototype.hasOwnProperty.call(P,i)&&"e"!==i&&Object.defineProperty(r,i,o(i));return r.e=function(e){return"ready"===f&&d("prepare"),m++,P.e(e).then(t,function(e){throw t(),e});function t(){m--,"prepare"===f&&(b[e]||T(e),0===m&&0===v&&k())}},r}var l=[],f="idle";function d(e){f=e;for(var t=0;t<l.length;t++)l[t].call(null,e)}var p,h,y,v=0,m=0,b={},w={},g={};function O(e){return+e+""===e?+e:e}function _(e){if("idle"!==f)throw new Error("check() is only allowed in idle status");return r=e,d("check"),(t=i,t=t||1e4,new Promise(function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,i=P.p+""+o+".hot-update.json";r.open("GET",i,!0),r.timeout=t,r.send(null)}catch(e){return n(e)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+i+" timed out."));else if(404===r.status)e();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+i+" failed."));else{try{var t=JSON.parse(r.responseText)}catch(e){return void n(e)}e(t)}}})).then(function(e){if(!e)return d("idle"),null;w={},b={},g=e.c,y=e.h,d("prepare");var t=new Promise(function(e,t){p={resolve:e,reject:t}});return h={},T(0),"prepare"===f&&0===m&&0===v&&k(),t});var t}function T(e){g[e]?(w[e]=!0,v++,function(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.charset="utf-8",n.src=P.p+""+e+"."+o+".hot-update.js",t.appendChild(n)}(e)):b[e]=!0}function k(){d("ready");var e=p;if(p=null,e)if(r)Promise.resolve().then(function(){return x(r)}).then(function(t){e.resolve(t)},function(t){e.reject(t)});else{var t=[];for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&t.push(O(n));e.resolve(t)}}function x(t){if("ready"!==f)throw new Error("apply() is only allowed in ready status");var n,r,i,s,u;function l(e){for(var t=[e],n={},r=t.slice().map(function(e){return{chain:[e],id:e}});r.length>0;){var o=r.pop(),i=o.id,a=o.chain;if((s=j[i])&&!s.hot._selfAccepted){if(s.hot._selfDeclined)return{type:"self-declined",chain:a,moduleId:i};if(s.hot._main)return{type:"unaccepted",chain:a,moduleId:i};for(var c=0;c<s.parents.length;c++){var u=s.parents[c],l=j[u];if(l){if(l.hot._declinedDependencies[i])return{type:"declined",chain:a.concat([u]),moduleId:i,parentId:u};-1===t.indexOf(u)&&(l.hot._acceptedDependencies[i]?(n[u]||(n[u]=[]),p(n[u],[i])):(delete n[u],t.push(u),r.push({chain:a.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}t=t||{};var v={},m=[],b={},w=function(){console.warn("[HMR] unexpected require("+T.moduleId+") to disposed module")};for(var _ in h)if(Object.prototype.hasOwnProperty.call(h,_)){var T;u=O(_);var k=!1,x=!1,S=!1,E="";switch((T=h[_]?l(u):{type:"disposed",moduleId:_}).chain&&(E="\nUpdate propagation: "+T.chain.join(" -> ")),T.type){case"self-declined":t.onDeclined&&t.onDeclined(T),t.ignoreDeclined||(k=new Error("Aborted because of self decline: "+T.moduleId+E));break;case"declined":t.onDeclined&&t.onDeclined(T),t.ignoreDeclined||(k=new Error("Aborted because of declined dependency: "+T.moduleId+" in "+T.parentId+E));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(T),t.ignoreUnaccepted||(k=new Error("Aborted because "+u+" is not accepted"+E));break;case"accepted":t.onAccepted&&t.onAccepted(T),x=!0;break;case"disposed":t.onDisposed&&t.onDisposed(T),S=!0;break;default:throw new Error("Unexception type "+T.type)}if(k)return d("abort"),Promise.reject(k);if(x)for(u in b[u]=h[u],p(m,T.outdatedModules),T.outdatedDependencies)Object.prototype.hasOwnProperty.call(T.outdatedDependencies,u)&&(v[u]||(v[u]=[]),p(v[u],T.outdatedDependencies[u]));S&&(p(m,[T.moduleId]),b[u]=w)}var L,D=[];for(r=0;r<m.length;r++)u=m[r],j[u]&&j[u].hot._selfAccepted&&D.push({module:u,errorHandler:j[u].hot._selfAccepted});d("dispose"),Object.keys(g).forEach(function(e){!1===g[e]&&function(e){delete installedChunks[e]}(e)});for(var I,M,H=m.slice();H.length>0;)if(u=H.pop(),s=j[u]){var q={},C=s.hot._disposeHandlers;for(i=0;i<C.length;i++)(n=C[i])(q);for(a[u]=q,s.hot.active=!1,delete j[u],delete v[u],i=0;i<s.children.length;i++){var A=j[s.children[i]];A&&(L=A.parents.indexOf(u))>=0&&A.parents.splice(L,1)}}for(u in v)if(Object.prototype.hasOwnProperty.call(v,u)&&(s=j[u]))for(M=v[u],i=0;i<M.length;i++)I=M[i],(L=s.children.indexOf(I))>=0&&s.children.splice(L,1);for(u in d("apply"),o=y,b)Object.prototype.hasOwnProperty.call(b,u)&&(e[u]=b[u]);var R=null;for(u in v)if(Object.prototype.hasOwnProperty.call(v,u)&&(s=j[u])){M=v[u];var N=[];for(r=0;r<M.length;r++)if(I=M[r],n=s.hot._acceptedDependencies[I]){if(-1!==N.indexOf(n))continue;N.push(n)}for(r=0;r<N.length;r++){n=N[r];try{n(M)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:u,dependencyId:M[r],error:e}),t.ignoreErrored||R||(R=e)}}}for(r=0;r<D.length;r++){var W=D[r];u=W.module,c=[u];try{P(u)}catch(e){if("function"==typeof W.errorHandler)try{W.errorHandler(e)}catch(n){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:u,error:n,originalError:e}),t.ignoreErrored||R||(R=n),R||(R=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:u,error:e}),t.ignoreErrored||R||(R=e)}}return R?(d("fail"),Promise.reject(R)):(d("idle"),new Promise(function(e){e(m)}))}var j={};function P(t){if(j[t])return j[t].exports;var r=j[t]={i:t,l:!1,exports:{},hot:function(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:n!==e,active:!0,accept:function(e,n){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._acceptedDependencies[e[r]]=n||function(){};else t._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:_,apply:x,status:function(e){if(!e)return f;l.push(e)},addStatusHandler:function(e){l.push(e)},removeStatusHandler:function(e){var t=l.indexOf(e);t>=0&&l.splice(t,1)},data:a[e]};return n=void 0,t}(t),parents:(s=c,c=[],s),children:[]};return e[t].call(r.exports,r,r.exports,u(t)),r.l=!0,r.exports}P.m=e,P.c=j,P.d=function(e,t,n){P.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},P.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},P.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return P.d(t,"a",t),t},P.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},P.p="",P.h=function(){return o},u(8)(P.s=8)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(t){o(this,e),this.cash=t.cash||0,this.seats=t.seats||0,this.staff=t.staff||[],this.worldTime=1e3}return r(e,[{key:"hire",value:function(e){for(var t in this.staff)this.staff[t].id==e.id&&(e=null);null!=e&&(this.staff.push(e),console.log("雇佣了"+e.name))}},{key:"getTime",value:function(){return this.worldTime}},{key:"setTime",value:function(e){return Number(e)&&(this.worldTime=Number(e)),this.worldTime}}],[{key:"getInstance",value:function(e){return this.instance||(this.instance=new this(e)),this.instance}}]),e}(),a=0,c=function(){function e(t,n){o(this,e),this.id=++a,this.name=t||"",this.salary=n||0}return r(e,[{key:"finish",value:function(){console.log(this.name+"工作完毕")}}],[{key:"getInstance",value:function(e){return this.instance||(this.instance=new this(e)),this.instance}}]),e}();t.Restaurant=i,t.Staff=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Waiter=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.customer={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Staff),r(t,[{key:"startWork",value:function(){console.log(this.name+"烹饪菜品")}},{key:"finishWork",value:function(){console.log(this.name+"烹饪完")}},{key:"changeStatus",value:function(e,t){var n=document.querySelector("#waiter-wrapper"),r=n.querySelector("#waiter-status");switch(e){case"点单":r.innerText="点单",n.style.top="225px",n.style.left="550px";break;case"下单":r.innerText="下单",n.style.top="10px",n.style.left="320px",setTimeout(function(e){e.innerText="空闲"},500,r);break;case"上菜":r.innerText="上菜",n.style.top="225px",n.style.left="550px",setTimeout(function(e){e.style.top="10px",e.style.left="320px"},500,n),setTimeout(function(e){e.innerText="空闲"},1e3,r),this.customer.eat(t)}}}]),t}();t.Waiter=i},,function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n(0);var i=function(){};i.create=function(e){var t={};switch(e){case"Customer":t=new a;break;case"Menu":t=c.getInstance()}return t};var a=function(){function e(){o(this,e),this.seatNumber=0,this.eatList=[]}return r(e,[{key:"order",value:function(){return c.getInstance().getRandom()}},{key:"changeStatus",value:function(e,t){var n=document.querySelector("#customer-status");switch(e){case"入座":n.innerText="入座";break;case"点单":for(var r=function(e){setTimeout(function(){n.innerText="点单还需"+(t-e)/1e3+"秒"},e)},o=0;o<t;o+=1e3)r(o);break;case"点单完毕":n.innerText="点单完毕"}}},{key:"eat",value:function(e){for(var t=document.querySelector("#customer-status"),n=document.querySelectorAll("#customer-dash-list li"),r={},o=0;o<n.length;o++)if(n[o].innerText==e.name){r=n[o];break}r.innerText=e.name+"已上",t.innerText="开始用餐",setTimeout(function(){r.innerText=e.name+"已吃完"},3e3)}}]),e}(),c=function(){function e(t){if(o(this,e),this.list=[],null!=t)for(var n in t)this.add(t[n].name,t[n].cost,t[n].price,t[n].time)}return r(e,[{key:"add",value:function(e,t,n,r){this.list.push(new function e(t,n,r,i){o(this,e),this.name=t,this.cost=n,this.price=r,this.time=i}(e,t,n,r))}},{key:"getRandom",value:function(){for(var e=Math.ceil(Math.random()*this.list.length),t=[],n=0;n<e;n++){var r=Math.floor(Math.random()*this.list.length);-1==t.indexOf(this.list[r])&&t.push(this.list[r])}return t}}],[{key:"getInstance",value:function(e){return this.instance||(this.instance=new this(e)),this.instance}}]),e}();t.Factory=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cook=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=n(1),a=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.preList=[],r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Staff),r(t,[{key:"startWork",value:function(){console.log(this.name+"烹饪菜品")}},{key:"finishWork",value:function(){console.log(this.name+"烹饪完")}},{key:"changeStatus",value:function(e){var t=document.querySelector("#cook-status");switch(e){case"开始":for(var n=0;this.preList.length>0;){for(var r=this.preList[0],o=[],a=1;a<this.preList.length;a++)o.push(this.preList[a]);this.preList=o;for(var c=function(e){setTimeout(function(n){t.innerText="烹饪"+n.name+"还需"+(n.time-e)+"秒"},1e3*n+1e3*e,r)},s=0;s<r.time;s++)c(s);n+=r.time;var u=this.preList;setTimeout(function(e,t,n){i.Waiter.getInstance().changeStatus("上菜",n),t.updateCookList(e)},1e3*n,u,this,r)}setTimeout(function(){t.innerText="空闲"},1e3*n);break;case"下单":t.innerText="下单"}}},{key:"updateCookList",value:function(e){e=e||this.preList;for(var t=document.querySelector("#app #cook-list"),n="",r=0;r<e.length;r++)n+="<li>"+e[r].name+"</li>";t.innerHTML=n}}]),t}();t.Cook=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toTest=void 0;var r=n(0),o=n(5),i=n(1),a=n(4),c=[];function s(){for(var e=document.querySelector("#app #customer-list"),t="",n=0;n<c.length;n++)t+='<div class = "customer"></div>';e.innerHTML=t}t.toTest=function(){var e=r.Restaurant.getInstance({cash:1e6,seats:1,staff:[]});document.querySelector("#app #cash").innerText=e.cash;var t=o.Cook.getInstance("Tony",1e4),n=i.Waiter.getInstance("Ben",9e3),u=a.Factory.create("Menu");u.add("糖醋排骨",20,40,3),u.add("麻婆豆腐",10,20,2),u.add("老鸭粉丝汤",13,26,2),u.add("蒜枣大黄鱼",18,44,4),console.log(u),e.hire(t),e.hire(n);document.querySelector("#app #open").onclick=function(){c.length<18?c.push(a.Factory.create("Customer")):alert("队伍太长啦，客人请等等再来排队吧"),s()},setInterval(function(){if("无"==document.querySelector("#customer-status").innerText&&0!=c.length){var r=c.pop();s(),new Promise(function(e,t){r.changeStatus("入座")}).then(n.changeStatus("点单")).then(r.changeStatus("点单",3e3)).then(setTimeout(function(){r.eatList=r.order(),function(e){for(var t=document.querySelector("#app #customer-dash-list"),n="",r=0;r<e.length;r++)n+="<li>"+e[r].name+"</li>";t.innerHTML=n}(r.eatList),r.changeStatus("点单完毕"),t.preList=r.eatList,n.changeStatus("下单"),n.customer=r},3e3)).then(setTimeout(function(){t.updateCookList(),t.changeStatus("开始")},3500)),setInterval(function(t){!function(t){var n=document.querySelectorAll("#app #customer-dash-list li"),r=document.querySelector("#app #cash"),o=document.querySelector("#customer-status");if("就餐完毕"!=o.innerText&&0!=n.length){for(var i=0;i<n.length;i++)if(-1==n[i].innerText.indexOf("已吃完"))return;for(var a=Number(r.innerText),c=0;c<t.eatList.length;c++)a+=Number(t.eatList[c].price-t.eatList[c].cost);r.innerText=a,e.cash=a,o.innerText="就餐完毕",setTimeout(function(){o.innerText="无",n[0].parentNode.innerHTML=""},1e3)}}(t)},100,r)}},100)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addLoadEvent=function(e){var t=window.onload;"function"!=typeof window.onload?window.onload=e:window.onload=function(){t(),e()}}},function(e,t,n){"use strict";var r=n(7),o=n(6);n(3),(0,r.addLoadEvent)(o.toTest)}]);